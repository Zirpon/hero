# 周报 2018-07-13

## 本周情况

1. 胜利条件设计服务端倒计时 修改为接受结果投票 优化 调试
2. 阅读MatchSvr TeamSvr BattleSvr代码 阅读skynet API接口
3. 部署了一个新的服务器
4. 问题:

    * 关掉客户端 无法重连战场 顶号可以但是有时候客户端进入战场界面有问题 数据同步的时候镜头跟随别的角色
    * gmCode 退出战场流程
    * skynet 热更代码
    * 选服界面 token不一致提示

## 上周情况：

1. 由于使用了内网的 global dispatch 本地虚拟机也开着一个global dispatch 造成无法进行多人匹配 于是把rocketmq 部署到本地
2. 掉线重连投降恢复
3. 阅读战斗流程 建立队伍-队伍匹配-生成战场-进入战场-战场帧同步-结束战场
4. 配合客户端调试

    * 客户端有时候会受到结束帧 有时候收不到
    * 修改协议 调试接口
    * 投降系统优化
    * 不同阵营出生点相同 bug 追踪调试
    * 需求改动: 条件达成结束->等所有人投票->条件达成结束
    * 挂机状态
    * udp掉线检测调试
    * 打完一局 返回大厅 大厅玩家的matchid没有清理 重新匹配 会发送系统错误给客户端

5. 问题：

    * 调试困难 需要额外设备 多开客户端调试
    * udpgate里的rak.core 里面是如何实现掉线检测 准备找时间抓包分析

---