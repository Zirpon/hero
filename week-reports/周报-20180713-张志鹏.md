# 周报 2018-07-13

## 本周情况：

1. 由于使用了内网的 global dispatch 本地虚拟机也开着一个global dispatch 造成无法进行多人匹配 于是把rocketmq 部署到本地
2. 掉线重连投降恢复
3. 阅读战斗流程 建立队伍-队伍匹配-生成战场-进入战场-战场帧同步-结束战场
4. 配合客户端调试

    * 客户端有时候会受到结束帧 有时候收不到
    * 修改协议 调试接口
    * 投降系统优化
    * 不同阵营出生点相同 bug 追踪调试
    * 需求改动: 条件达成结束->等所有人投票->条件达成结束
    * 挂机状态
    * udp掉线检测调试
    * 打完一局 返回大厅 大厅玩家的matchid没有清理 重新匹配 会发送系统错误给客户端

5. 问题：

    * 调试困难 需要额外设备 多开客户端调试
    * udpgate里的rak.core 里面是如何实现掉线检测 准备找时间抓包分析

## 上周情况：

1. 阅读 skynet redis watch 订阅发布 相关接口 与 整个服务的请求返回流程
2. 选服节点同步
3. 选服节点同步调试
4. haproxy keepalived 安装脚本
5. 开新的虚拟机调试脚本
6. 部署了新的两个虚拟机 跟网管申请了三个内网 ip 第三个IP 用以无线接入的笔记本的虚拟机做访问端 调试选服集群的性能
7. 总结了登录服的设计结构
8. 阅读战斗服相关代码 部署战斗服 问前端要了一个exe 调试了 从 选服集群-登录-进入战斗 的流程
9. 实现投降系统

---